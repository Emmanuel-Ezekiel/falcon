(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{7843:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,4147,23)),Promise.resolve().then(a.t.bind(a,8489,23)),Promise.resolve().then(a.bind(a,814)),Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.bind(a,4322))},4322:(e,t,a)=>{"use strict";a.d(t,{Providers:()=>l});var r=a(5155),o=a(3391),n=a(8943),s=a(2670);let i=(0,n.U1)({reducer:{auth:s.Ay}});function l(e){let{children:t}=e;return(0,r.jsx)(o.Kq,{store:i,children:t})}},2670:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>l,T5:()=>n,iD:()=>s,ri:()=>i});var r=a(8943),o=a(9050);let n=(0,r.zD)("auth/checkAuth",async(e,t)=>{let{rejectWithValue:a}=t;try{if(!await o.SK())throw Error("Token is invalid");return{id:"1",email:"user@example.com",name:"User"}}catch(e){return a(e.message)}}),s=(0,r.zD)("auth/login",async e=>{var t;let a=await o.iD(e);if(!a.success)throw Error(a.message);return null===(t=a.data)||void 0===t?void 0:t.user}),i=(0,r.zD)("auth/logout",async()=>{await o.ri()}),l=(0,r.Z0)({name:"auth",initialState:{user:null,loading:!1,error:null,isAuthenticated:!1},reducers:{},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0}).addCase(n.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload||null,e.isAuthenticated=!!t.payload}).addCase(n.rejected,e=>{e.loading=!1,e.user=null}).addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload||null,e.isAuthenticated=!0}).addCase(s.rejected,(e,t)=>{var a;e.loading=!1,e.error=null!==(a=t.error.message)&&void 0!==a?a:"Login failed"}).addCase(i.fulfilled,e=>{e.user=null,e.isAuthenticated=!1})}}).reducer},9050:(e,t,a)=>{"use strict";a.d(t,{SK:()=>f,BD:()=>c,iD:()=>l,ri:()=>u,kz:()=>i,xw:()=>d,A$:()=>h});var r,o=a(2651);let n=null!==(r=a(2818).env.NEXT_PUBLIC_API_URL)&&void 0!==r?r:"https://falcon-api.lyticaltechserver.com/api",s=o.A.create({baseURL:n,headers:{"Content-Type":"application/json"}});async function i(e){return(await s.post("/Auth/register",e)).data}async function l(e){let t=await s.post("/Auth/login",e);return t.data.success&&t.data.data&&(localStorage.setItem("auth-token",t.data.data.token),localStorage.setItem("refresh-token",t.data.data.refreshToken)),t.data}async function u(){await s.delete("/Auth/logout"),localStorage.removeItem("auth-token"),localStorage.removeItem("refresh-token")}async function c(e){return(await s.post("/Auth/forgot-password",{email:e})).data}async function d(e){return(await s.post("/Auth/reset-password",e)).data}async function h(e,t){return(await s.post("/Auth/email-verify",{verificationCode:e,email:t})).data}async function f(){try{return await s.get("/Auth/refresh-token"),!0}catch(e){return!1}}s.interceptors.request.use(async e=>{let t=localStorage.getItem("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,async e=>{let t=e.config;if(401===e.response.status&&!t._retry){t._retry=!0;try{let e=localStorage.getItem("refresh-token"),{token:a}=(await o.A.post("".concat(n,"/Auth/refresh-token"),{refreshToken:e})).data;return localStorage.setItem("auth-token",a),t.headers.Authorization="Bearer ".concat(a),s(t)}catch(e){localStorage.removeItem("auth-token"),localStorage.removeItem("refresh-token"),window.location.href="/login"}}return Promise.reject(e)})},347:()=>{},4147:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_4d318d",variable:"__variable_4d318d"}},8489:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_ea5f4b",variable:"__variable_ea5f4b"}}},e=>{var t=t=>e(e.s=t);e.O(0,[896,651,814,505,441,517,358],()=>t(7843)),_N_E=e.O()}]);