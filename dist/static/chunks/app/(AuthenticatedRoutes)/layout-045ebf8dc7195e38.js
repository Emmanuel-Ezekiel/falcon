(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[366],{8786:(e,t,r)=>{Promise.resolve().then(r.bind(r,423))},6046:(e,t,r)=>{"use strict";var a=r(6658);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},423:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5155),n=r(3391),s=r(6046),o=r(3312);let i=(0,r(4057).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var u=r(2670);function d(e){let{children:t}=e,r=(0,n.wA)(),d=(0,s.useRouter)(),c=(0,n.d4)(e=>e.auth.isAuthenticated),l=async()=>{await r((0,u.ri)()),d.push("/login")};return c?(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("header",{className:"border-b",children:(0,a.jsxs)("div",{className:"container flex h-16 items-center justify-between",children:[(0,a.jsx)("div",{children:"Welcome to the Dashboard"}),(0,a.jsx)(o.$,{variant:"ghost",size:"icon",onClick:l,children:(0,a.jsx)(i,{className:"h-5 w-5"})})]})}),(0,a.jsx)("main",{className:"container py-6",children:t})]}):null}},3312:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var a=r(5155),n=r(2115),s=r(2317),o=r(1027),i=r(1567);let u=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,size:o,asChild:d=!1,...c}=e,l=d?s.DX:"button";return(0,a.jsx)(l,{className:(0,i.cn)(u({variant:n,size:o,className:r})),ref:t,...c})});d.displayName="Button"},1567:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(3463),n=r(9795);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}},2670:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u,T5:()=>s,iD:()=>o,ri:()=>i});var a=r(8943),n=r(9050);let s=(0,a.zD)("auth/checkAuth",async(e,t)=>{let{rejectWithValue:r}=t;try{if(!await n.SK())throw Error("Token is invalid");return{id:"1",email:"user@example.com",name:"User"}}catch(e){return r(e.message)}}),o=(0,a.zD)("auth/login",async e=>{var t;let r=await n.iD(e);if(!r.success)throw Error(r.message);return null===(t=r.data)||void 0===t?void 0:t.user}),i=(0,a.zD)("auth/logout",async()=>{await n.ri()}),u=(0,a.Z0)({name:"auth",initialState:{user:null,loading:!1,error:null,isAuthenticated:!1},reducers:{},extraReducers:e=>{e.addCase(s.pending,e=>{e.loading=!0}).addCase(s.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload||null,e.isAuthenticated=!!t.payload}).addCase(s.rejected,e=>{e.loading=!1,e.user=null}).addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload||null,e.isAuthenticated=!0}).addCase(o.rejected,(e,t)=>{var r;e.loading=!1,e.error=null!==(r=t.error.message)&&void 0!==r?r:"Login failed"}).addCase(i.fulfilled,e=>{e.user=null,e.isAuthenticated=!1})}}).reducer},9050:(e,t,r)=>{"use strict";r.d(t,{SK:()=>g,BD:()=>c,iD:()=>u,ri:()=>d,kz:()=>i,xw:()=>l,A$:()=>h});var a,n=r(2651);let s=null!==(a=r(2818).env.NEXT_PUBLIC_API_URL)&&void 0!==a?a:"https://falcon-api.lyticaltechserver.com/api",o=n.A.create({baseURL:s,headers:{"Content-Type":"application/json"}});async function i(e){return(await o.post("/Auth/register",e)).data}async function u(e){let t=await o.post("/Auth/login",e);return t.data.success&&t.data.data&&(localStorage.setItem("auth-token",t.data.data.token),localStorage.setItem("refresh-token",t.data.data.refreshToken)),t.data}async function d(){await o.delete("/Auth/logout"),localStorage.removeItem("auth-token"),localStorage.removeItem("refresh-token")}async function c(e){return(await o.post("/Auth/forgot-password",{email:e})).data}async function l(e){return(await o.post("/Auth/reset-password",e)).data}async function h(e,t){return(await o.post("/Auth/email-verify",{verificationCode:e,email:t})).data}async function g(){try{return await o.get("/Auth/refresh-token"),!0}catch(e){return!1}}o.interceptors.request.use(async e=>{let t=localStorage.getItem("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{let t=e.config;if(401===e.response.status&&!t._retry){t._retry=!0;try{let e=localStorage.getItem("refresh-token"),{token:r}=(await n.A.post("".concat(s,"/Auth/refresh-token"),{refreshToken:e})).data;return localStorage.setItem("auth-token",r),t.headers.Authorization="Bearer ".concat(r),o(t)}catch(e){localStorage.removeItem("auth-token"),localStorage.removeItem("refresh-token"),window.location.href="/login"}}return Promise.reject(e)})}},e=>{var t=t=>e(e.s=t);e.O(0,[651,129,505,441,517,358],()=>t(8786)),_N_E=e.O()}]);