(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{2894:(e,r,s)=>{Promise.resolve().then(s.bind(s,6692))},6046:(e,r,s)=>{"use strict";var t=s(6658);s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(r,{useSearchParams:function(){return t.useSearchParams}})},6692:(e,r,s)=>{"use strict";s.d(r,{default:()=>x});var t=s(5155),a=s(2115),o=s(6046),n=s(7752),i=s(632),d=s(2783),c=s(3415),l=s(814),u=s(3312),m=s(3900),f=s(8986),p=s(9749),h=s(9050);let w=c.z.object({email:c.z.string().email("Invalid email address"),code:c.z.string().min(1,"Reset code is required"),password:c.z.string().min(8,"Password must be at least 8 characters"),confirmPassword:c.z.string()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function x(){let e=(0,o.useRouter)(),r=(0,o.useSearchParams)(),[s,c]=(0,a.useState)(!1),[x,g]=(0,a.useState)({}),[y,v]=(0,a.useState)(!1),[b,N]=(0,a.useState)(!1),j=r.get("email"),k=r.get("code");async function P(r){if(r.preventDefault(),c(!0),g({}),!j||!k){l.o.error("Missing email or reset code. Please use the link from your email."),c(!1);return}let s=new FormData(r.currentTarget),t={email:j,code:k,password:s.get("password"),confirmPassword:s.get("confirmPassword")},a=w.safeParse(t);if(!a.success){let e={};a.error.issues.forEach(r=>{e[r.path[0]]=r.message}),g(e),c(!1),l.o.error("Please fix the errors in the form");return}try{let r=await (0,h.xw)(t);r.success?(l.o.success("Password reset successfully"),e.push("/login?reset=success")):(l.o.error(r.message||"Failed to reset password"),g({form:r.message}))}catch(e){l.o.error("An error occurred while resetting your password"),g({form:"An error occurred while resetting your password"})}finally{c(!1)}}return(0,t.jsx)("div",{className:"flex h-screen w-screen flex-col items-center justify-center",children:(0,t.jsxs)(p.Zp,{className:"w-full max-w-lg",children:[(0,t.jsxs)(p.aR,{className:"space-y-1",children:[(0,t.jsx)(p.ZB,{className:"text-2xl",children:"Reset Password"}),(0,t.jsx)(p.BT,{children:"Enter your new password below"})]}),(0,t.jsx)(p.Wu,{children:(0,t.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f.J,{htmlFor:"password",children:"New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.p,{id:"password",name:"password",type:y?"text":"password",className:x.password?"border-red-500 pr-10":"pr-10",required:!0}),(0,t.jsxs)(u.$,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>v(!y),children:[y?(0,t.jsx)(n.A,{className:"h-4 w-4"}):(0,t.jsx)(i.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:y?"Hide password":"Show password"})]})]}),x.password&&(0,t.jsx)("p",{className:"text-xs text-red-500",children:x.password})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f.J,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.p,{id:"confirmPassword",name:"confirmPassword",type:b?"text":"password",className:x.confirmPassword?"border-red-500 pr-10":"pr-10",required:!0}),(0,t.jsxs)(u.$,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>N(!b),children:[b?(0,t.jsx)(n.A,{className:"h-4 w-4"}):(0,t.jsx)(i.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:b?"Hide password":"Show password"})]})]}),x.confirmPassword&&(0,t.jsx)("p",{className:"text-xs text-red-500",children:x.confirmPassword})]}),x.form&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:x.form}),(0,t.jsxs)(u.$,{type:"submit",className:"w-full",disabled:s,children:[s&&(0,t.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Reset Password"]})]})})]})})}},3312:(e,r,s)=>{"use strict";s.d(r,{$:()=>c});var t=s(5155),a=s(2115),o=s(2317),n=s(1027),i=s(1567);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,r)=>{let{className:s,variant:a,size:n,asChild:c=!1,...l}=e,u=c?o.DX:"button";return(0,t.jsx)(u,{className:(0,i.cn)(d({variant:a,size:n,className:s})),ref:r,...l})});c.displayName="Button"},9749:(e,r,s)=>{"use strict";s.d(r,{BT:()=>c,Wu:()=>l,ZB:()=>d,Zp:()=>n,aR:()=>i});var t=s(5155),a=s(2115),o=s(1567);let n=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...a})});n.displayName="Card";let i=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,o.cn)("font-semibold leading-none tracking-tight",s),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let l=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,o.cn)("p-6 pt-0",s),...a})});l.displayName="CardContent",a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},3900:(e,r,s)=>{"use strict";s.d(r,{p:()=>n});var t=s(5155),a=s(2115),o=s(1567);let n=a.forwardRef((e,r)=>{let{className:s,type:a,...n}=e;return(0,t.jsx)("input",{type:a,className:(0,o.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...n})});n.displayName="Input"},8986:(e,r,s)=>{"use strict";s.d(r,{J:()=>c});var t=s(5155),a=s(2115),o=s(6195),n=s(1027),i=s(1567);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(o.b,{ref:r,className:(0,i.cn)(d(),s),...a})});c.displayName=o.b.displayName},1567:(e,r,s)=>{"use strict";s.d(r,{cn:()=>o});var t=s(3463),a=s(9795);function o(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,a.QP)((0,t.$)(r))}},9050:(e,r,s)=>{"use strict";s.d(r,{SK:()=>f,BD:()=>l,iD:()=>d,ri:()=>c,kz:()=>i,xw:()=>u,A$:()=>m});var t,a=s(2651);let o=null!==(t=s(2818).env.NEXT_PUBLIC_API_URL)&&void 0!==t?t:"https://falcon-api.lyticaltechserver.com/api",n=a.A.create({baseURL:o,headers:{"Content-Type":"application/json"}});async function i(e){return(await n.post("/Auth/register",e)).data}async function d(e){let r=await n.post("/Auth/login",e);return r.data.success&&r.data.data&&(localStorage.setItem("auth-token",r.data.data.token),localStorage.setItem("refresh-token",r.data.data.refreshToken)),r.data}async function c(){await n.delete("/Auth/logout"),localStorage.removeItem("auth-token"),localStorage.removeItem("refresh-token")}async function l(e){return(await n.post("/Auth/forgot-password",{email:e})).data}async function u(e){return(await n.post("/Auth/reset-password",e)).data}async function m(e,r){return(await n.post("/Auth/email-verify",{verificationCode:e,email:r})).data}async function f(){try{return await n.get("/Auth/refresh-token"),!0}catch(e){return!1}}n.interceptors.request.use(async e=>{let r=localStorage.getItem("auth-token");return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{let r=e.config;if(401===e.response.status&&!r._retry){r._retry=!0;try{let e=localStorage.getItem("refresh-token"),{token:s}=(await a.A.post("".concat(o,"/Auth/refresh-token"),{refreshToken:e})).data;return localStorage.setItem("auth-token",s),r.headers.Authorization="Bearer ".concat(s),n(r)}catch(e){localStorage.removeItem("auth-token"),localStorage.removeItem("refresh-token"),window.location.href="/login"}}return Promise.reject(e)})},7752:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(4057).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},632:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(4057).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},e=>{var r=r=>e(e.s=r);e.O(0,[651,129,814,167,441,517,358],()=>r(2894)),_N_E=e.O()}]);