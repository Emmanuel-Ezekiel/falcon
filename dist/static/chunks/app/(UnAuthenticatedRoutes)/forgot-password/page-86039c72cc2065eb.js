(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[442],{7664:(e,t,r)=>{Promise.resolve().then(r.bind(r,3653))},3653:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(5155),s=r(2115),n=r(8173),o=r.n(n),i=r(2783),l=r(3415),c=r(814),d=r(3312),u=r(3900),m=r(8986),f=r(9749),h=r(9050);let p=l.z.object({email:l.z.string().email("Please enter a valid email address")});function x(){let[e,t]=(0,s.useState)(!1),[r,n]=(0,s.useState)({}),[l,x]=(0,s.useState)(!1);async function g(e){e.preventDefault(),t(!0),n({});let r={email:new FormData(e.currentTarget).get("email")},a=p.safeParse(r);if(!a.success){let e={};a.error.issues.forEach(t=>{e[t.path[0]]=t.message}),n(e),t(!1),c.o.error("Please fix the errors in the form");return}try{let e=await (0,h.BD)(r.email);e.success?(x(!0),c.o.success("Password reset instructions sent to your email")):(c.o.error(e.message||"Failed to send reset instructions"),n({form:e.message}))}catch(e){c.o.error("An error occurred while processing your request"),n({form:"An error occurred while processing your request"})}finally{t(!1)}}return(0,a.jsx)("div",{className:"flex h-screen w-screen flex-col items-center justify-center",children:(0,a.jsxs)(f.Zp,{className:"w-full max-w-lg",children:[(0,a.jsxs)(f.aR,{className:"space-y-1",children:[(0,a.jsx)(f.ZB,{className:"text-2xl",children:"Reset password"}),(0,a.jsx)(f.BT,{children:"Enter your email address and we'll send you a link to reset your password"})]}),(0,a.jsx)(f.Wu,{children:l?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-green-600",children:"If an account exists with that email, we've sent you instructions to reset your password."}),(0,a.jsx)(d.$,{asChild:!0,className:"w-full",children:(0,a.jsx)(o(),{href:"/login",children:"Return to login"})})]}):(0,a.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{htmlFor:"email",children:"Email"}),(0,a.jsx)(u.p,{id:"email",name:"email",type:"email",className:r.email?"border-red-500":"",required:!0}),r.email&&(0,a.jsx)("p",{className:"text-xs text-red-500",children:r.email})]}),r.form&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:r.form}),(0,a.jsxs)(d.$,{type:"submit",className:"w-full",disabled:e,children:[e&&(0,a.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Send reset link"]}),(0,a.jsxs)("div",{className:"text-center text-sm",children:["Remember your password?"," ",(0,a.jsx)(o(),{href:"/login",className:"text-primary underline",children:"Login"})]})]})})]})})}},3312:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(5155),s=r(2115),n=r(2317),o=r(1027),i=r(1567);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:s,size:o,className:r})),ref:t,...d})});c.displayName="Button"},9749:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>o,aR:()=>i});var a=r(5155),s=r(2115),n=r(1567);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});o.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},3900:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var a=r(5155),s=r(2115),n=r(1567);let o=s.forwardRef((e,t)=>{let{className:r,type:s,...o}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"},8986:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});var a=r(5155),s=r(2115),n=r(6195),o=r(1027),i=r(1567);let l=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.b,{ref:t,className:(0,i.cn)(l(),r),...s})});c.displayName=n.b.displayName},1567:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(3463),s=r(9795);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},9050:(e,t,r)=>{"use strict";r.d(t,{SK:()=>f,BD:()=>d,iD:()=>l,ri:()=>c,kz:()=>i,xw:()=>u,A$:()=>m});var a,s=r(2651);let n=null!==(a=r(2818).env.NEXT_PUBLIC_API_URL)&&void 0!==a?a:"https://falcon-api.lyticaltechserver.com/api",o=s.A.create({baseURL:n,headers:{"Content-Type":"application/json"}});async function i(e){return(await o.post("/Auth/register",e)).data}async function l(e){let t=await o.post("/Auth/login",e);return t.data.success&&t.data.data&&(localStorage.setItem("auth-token",t.data.data.token),localStorage.setItem("refresh-token",t.data.data.refreshToken)),t.data}async function c(){await o.delete("/Auth/logout"),localStorage.removeItem("auth-token"),localStorage.removeItem("refresh-token")}async function d(e){return(await o.post("/Auth/forgot-password",{email:e})).data}async function u(e){return(await o.post("/Auth/reset-password",e)).data}async function m(e,t){return(await o.post("/Auth/email-verify",{verificationCode:e,email:t})).data}async function f(){try{return await o.get("/Auth/refresh-token"),!0}catch(e){return!1}}o.interceptors.request.use(async e=>{let t=localStorage.getItem("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{let t=e.config;if(401===e.response.status&&!t._retry){t._retry=!0;try{let e=localStorage.getItem("refresh-token"),{token:r}=(await s.A.post("".concat(n,"/Auth/refresh-token"),{refreshToken:e})).data;return localStorage.setItem("auth-token",r),t.headers.Authorization="Bearer ".concat(r),o(t)}catch(e){localStorage.removeItem("auth-token"),localStorage.removeItem("refresh-token"),window.location.href="/login"}}return Promise.reject(e)})}},e=>{var t=t=>e(e.s=t);e.O(0,[651,129,814,167,173,441,517,358],()=>t(7664)),_N_E=e.O()}]);